---
# Copyright 2016 Yahoo Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.
title: "Developing RESTful Web Services with Jersey"
---

<style>
    .terminal-prefix:before
    {
        content: "$ ";
    }
</style>

<p>
<a href="https://jersey.java.net/">Jersey</a> is the recommended framework
for building RESTful services on JDisc.
The example code below will help get you started.
</p>


<h1 id="prerequisites">A: Prerequisites</h1>
<p>
Refer to <a href="../develop-with-vespa.html">Develop with Vespa</a>
to get started with Maven and the sample applications - in this case <em>jersey</em>
</p>


<h1 id="get-example-project">B: Run the example</h1>
<ol>
<li>
    <p><a href="https://help.github.com/articles/fork-a-repo">Fork</a>
        <em>jersey</em> and clone your version</p>
</li><li>
    <p><strong>Build</strong> the project:</p>
    <pre class="terminal-prefix">mvn package</pre>
</li><li>
    <p><strong>Deploy</strong> the application (located in <code>target/application</code>) as described in the
        <a href="index.html#getting-started">getting started section</a>.</p>
</li><li>
    <p><strong>Query</strong> the Jersey resource, preferably using a
    browser with a JSON add-on, or just <code>curl</code>:
    <pre class="terminal-prefix">curl http://&lt;endpoint&gt;:8080/rest-api/hello</pre>
    The expected output is:
    <pre>Hello, World!</pre></p>
</li><li>
    <p><strong>Explore</strong> the other resources in the example by using Jersey's WADL support:
    <pre class=terminal-prefix>curl http://&lt;endpoint&gt;:4080/rest-api/application.wadl</pre></p>
</li>
</ol>


<h1 id="how-does-it-work">C: Key ingredients</h1>
<h3 id="project-pom">pom.xml</h3>
<ul>
  <li>
    No extra dependencies; the relevant artifacts are already pulled in via <code>container-dev</code>.
  </li><li>
    The <a
    href="bundle-plugin.html#exporting-importing-and-including-packages-from-bundles">bundle
    plugin</a> will ensure that the Jersey resources are available in the <code>jersey-hello-world</code> bundle.
    </li>
</ul>

<h3>services.xml</h3>
<p>
Jersey is enabled by including:
<pre>
&lt;rest-api path="rest-api" jersey2="true"&gt;
    &lt;components bundle="jersey-hello-world"/&gt;
&lt;/rest-api&gt;
</pre>
</p>

<ul>
  <li>Multiple <code>rest-api</code> elements are allowed:
    each must have a unique path, and will get its own web application.</li>
  <li>Each <code>rest-api</code> can contain multiple bundles by declaring
    multiple <code>components</code> elements.</li>
</ul>


<h3>JDisc Components</h3>
<ul>
    <li>
        <p>
        <a href="../configuring-components.html">JDisc Components</a> can be injected directly into Jersey resources:
        <ul>
            <li>
                <code>UserComponent</code> is injected into <code>SyncResourceWithInjection</code>.
            </li>
            <li>
                <code>UserComponent</code> is defined in <strong>user.def</strong> and configured in <strong>services.xml</strong>.
            </li>
        </ul>
        </p>
    </li>

    <li>
        <p>
        Injecting <a href="../cloudconfig/config-introduction.html#configuration">Config</a> without wrapping it in a <a href="../configuring-components.html">JDisc Component</a> will not work:
        <ul>
            <li>
                <code>UserConfig</code> needs to be wrapped in <code>UserComponent</code>.
            </li>
        </ul>
        </p>
    </li>

    <li>
        <p>
        While Jersey creates a new resource instance for each request, the JDisc Components is the same object until the application is restarted or redeployed.
        </p>
    </li>

    <li>
        <p>
            Injected components can be a subclass of the parameter class required by the resource constructor:
            <ul>
                <li>
                    <code>UserComponentBase</code> is not required, but included to illustrate the point.
                </li>
            </ul>
        </p>
    </li>
</ul>


<h1 id="common-pitfalls">D: Troubleshooting</h1>

<h2>Ignored provider</h2>
<p>If you get something like the message below in your log, it is usually a
packaging problem.</p>
<pre>
A provider [your class] registered in SERVER runtime does not implement any provider interfaces applicable in the SERVER runtime. Due to constraint configuration problems the provider [your class] will be ignored.
</pre>
<p>The JAX-RS classes, like the @GET annotation, have been bundled inside your
plug-in bundle, causing the container not to recognize them as valid
annotations. The fix is using “mvn dependency:tree” to figure out what
dependency has caused JAX-RS to be included, and then add the proper exclusion
clause to your POM file.</p>

<h2>No result returned when throwing WebApplicationException</h2>
<p>The container has no special handling of javax.ws.rs.WebApplicationException
and its subclasses. All Jersey plug-ins must either be exception safe, or supply
the proper implementations of javax.ws.rs.ext.ExceptionMapper for all exceptions
which are expected to be thrown from the plug-in (and mark these with the
@Provider annotation).</p>


