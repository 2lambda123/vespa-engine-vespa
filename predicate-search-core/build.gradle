/*
 * This file was generated by the Gradle 'init' task.
 */

//plugins {
//    id 'antlr'
//}

configurations {
    antlr3
}

dependencies {
    compile 'org.antlr:antlr-runtime:3.5.2'
    antlr3 'org.antlr:antlr:3.4'
    compile project(':container-dependency-versions:parent:vespajlib')
    compile 'com.yahoo.vespa:annotations:7.28.21'
    testCompile 'junit:junit:4.12'
    compileOnly 'com.fasterxml.jackson.core:jackson-core:2.8.11'
}

description = 'predicate-search-core'


task generateGrammarSource(type: JavaExec) {
    description = 'Generates Java sources from Antlr3 grammars.'

    def antlrSource = 'src/main/antlr3'

    inputs.dir file(antlrSource)
    outputs.dir file("$buildDir/generated-sources/antlr")

    def grammars = fileTree(antlrSource).include('**/*.g')

    main = 'org.antlr.Tool'
    classpath = configurations.antlr3
    args = ["-o", "$buildDir/generated-sources/antlr/", grammars.files].flatten()
}

compileJava {
    dependsOn generateGrammarSource
}



sourceSets {
    main{
        java {
           srcDir "$buildDir/generated-sources/antlr"
        }
    }
}
