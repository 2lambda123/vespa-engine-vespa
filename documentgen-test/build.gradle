/*
 * This file was generated by the Gradle 'init' task.
 */

configurations {
  documentgen
}

dependencies {
    compile project(':container-dependency-versions:parent:container-dev')
    compile project(':container-dependency-versions:parent:linguistics')
    compile project(':container-dependency-versions:parent:config-model')
    compile project(':container-dependency-versions:parent:config-model-api')
    testCompile 'org.apache.maven:maven-plugin-api:3.5.0'
    compileOnly 'org.apache.maven:maven-plugin-api:3.5.0'
    testCompile 'junit:junit:4.12'

    documentgen project(':container-dependency-versions:parent:vespa-documentgen-plugin')
    documentgen 'org.apache.maven:maven-plugin-api:3.5.0'
}

description = 'documentgen_test'

task documentGen(type: JavaExec) {
	workingDir = file(buildDir)
	outputs.dir "${buildDir}"

	classpath configurations.documentgen
	main = "com.yahoo.vespa.DocumentGenMojo"
	args = [ "${projectDir}/etc/complex", 
                 "${buildDir}/generated-sources/vespa-documentgen-plugin/", 
                 "com.yahoo.vespa.documentgen.test"  ]
}

sourceSets {
  test {
    java {
      srcDir "${buildDir}/generated-sources/vespa-documentgen-plugin"
    }
  }
}

compileTestJava.dependsOn documentGen
