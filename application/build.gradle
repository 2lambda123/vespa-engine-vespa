/*
 * This file was generated by the Gradle 'init' task.
 */

dependencies {
    compile project(':standalone-container')
    compile project(':config-provisioning')
    compile project(':config-model')
    compile project(':config-model-api')
    compile project(':model-integration')
    compile project(':jrt')
    compile project(':container-dev')
    compile project(':container-search-gui')
    compile project(':zkfacade')
    compile project(':jdisc_jetty')
    compile 'com.ibm.icu:icu4j:57.1'
    compile 'com.optimaize.languagedetector:language-detector:0.6'
    compile 'commons-collections:commons-collections:3.2.1'
    compile 'org.antlr:antlr-runtime:3.5.2'
    compile 'org.antlr:antlr4-runtime:4.5'
    compile 'org.apache.commons:commons-exec:1.3'
    compile 'org.apache.opennlp:opennlp-tools:1.8.4'
    compile 'org.hdrhistogram:HdrHistogram:2.1.8'
    compile 'xerces:xercesImpl:2.11.0'
    compile 'commons-beanutils:commons-beanutils:1.7.0'
    compile 'commons-beanutils:commons-beanutils-core:1.8.0'
    compile 'commons-configuration:commons-configuration:1.6'
    compile 'commons-digester:commons-digester:1.8'
    testCompile 'org.hamcrest:hamcrest-all:1.3'
    testCompile 'junit:junit:4.12'
    testCompile project(':container-test-jars:jersey-resources')
    testCompile 'org.apache.httpcomponents:httpclient:4.4.1'

    testRuntime files("target/test-classes")
}


task copyJerseyResourcesJar {
  dependsOn ':container-test-jars:jersey-resources:jar'
  doLast {
    def sourceFile =  project(':container-test-jars:jersey-resources').buildDir.toString() +   "/libs/jersey-resources-" + version + ".jar"
    copy {
      from file(sourceFile)
      into "${projectDir}/target/test-jars/"
      rename { String fileName ->
	return "jersey-resources.jar"
      }
    }
    mkdir "${projectDir}/target/test-classes/"
  }
}

clean.doFirst {
    delete "${projectDir}/target/"
}

test {
    dependsOn copyJerseyResourcesJar
}
