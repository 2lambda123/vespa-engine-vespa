---
# Copyright 2016 Yahoo Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.
title: "jDisc Container tuning"
---

<p class="ingress">
A collection of configuration parameters to tune the JDisc Container
as used in Vespa.</p>

<h1 id="maxthreads">Set number of worker threads</h1>

<p>
The worker threads for e.g. search queries is handled by a central Executor provider
which is set up with the configuration named "threadpool". The variable for
controlling the max number is an integer variable named "maxthreads", the
default value is 500. Do note e.g. federation will spawn off extra worker
threads in addition to this number. The Executor provider will pre-start
the worker threads, so even an idle container will report running several
hundred threads. Tuning this value is especially relevant if the log starts
being filled with warnings about no available worker threads on your docproc,
search or processing container. Example:
</p>

<pre>
&lt;jdisc&gt;
    ...
    &lt;config name="container.handler.threadpool"&gt;
        &lt;maxthreads&gt;2000&lt;/maxthreads&gt;
    &lt;/config&gt;
    ...
&lt;/jdisc&gt;
</pre>

<p>
Handlers which are injected with an Executor in their constructor will share
threads from the same threadpool.
</p>


