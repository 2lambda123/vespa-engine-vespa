/*
 * This file was generated by the Gradle 'init' task.
 */

dependencies {
    compile project(':container-dependency-versions:parent:filedistribution')
    compile project(':container-dependency-versions:parent:serviceview')
    compile 'org.apache.commons:commons-compress:1.18'
    compile 'commons-io:commons-io:2.4'
    compile 'org.glassfish.jersey.ext:jersey-proxy-client:2.25'
    compile 'net.jpountz.lz4:lz4:1.3.0'
    testCompile 'org.hamcrest:hamcrest-all:1.3'
    testCompile 'junit:junit:4.12'
    testCompile 'com.github.tomakehurst:wiremock-standalone:2.6.0'
    testCompile project(':container-dependency-versions:parent:testutil')
    testCompile project(':container-dependency-versions:parent:config-model-api')
    testCompile project(':container-dependency-versions:parent:config-application-package')
    testCompile 'com.google.guava:guava-testlib:20.0'
    testCompile project(':container-dependency-versions:parent:container-test')
    testCompile 'org.apache.curator:curator-test:2.9.1'
    testCompile 'org.mockito:mockito-core:1.9.5'
    providedCompile project(':container-dependency-versions:parent:defaults')
    providedCompile project(':container-dependency-versions:parent:vespajlib')
    providedCompile project(':container-dependency-versions:parent:orchestrator')
    providedCompile project(':container-dependency-versions:parent:application-model')
    providedCompile project(':container-dependency-versions:parent:config-bundle')
    providedCompile project(':container-dependency-versions:parent:config-provisioning')
    providedCompile project(':container-dependency-versions:parent:config-model-api')
    providedCompile project(':container-dependency-versions:parent:config-model')
    providedCompile project(':container-dependency-versions:parent:configserver-flags')
    providedCompile project(':container-dependency-versions:parent:zkfacade')
    providedCompile project(':container-dependency-versions:parent:container-dev')
    providedCompile project(':container-dependency-versions:parent:vespa_jersey2')
    providedCompile project(':container-dependency-versions:parent:container-jersey2')
    providedCompile project(':container-dependency-versions:parent:jrt')
    providedCompile project(':container-dependency-versions:parent:statistics')
    providedCompile project(':container-dependency-versions:parent:configdefinitions')
    providedCompile project(':container-dependency-versions:parent:flags')
    compileOnly 'javax.ws.rs:javax.ws.rs-api:2.0'
    compileOnly 'com.google.guava:guava:20.0'
    compileOnly 'com.fasterxml.jackson.core:jackson-databind:2.8.11.2'
}

task generateVtag(type: JavaExec) {
    dependsOn ":container-dependency-versions:parent:vespajlib:compileJava"
    workingDir = file(buildDir)
    outputs.dir "${buildDir}"

    classpath = files([
        "${rootDir}/vespajlib/build/classes/java/main"
        ])
    main = "com.yahoo.vespa.VersionTagger"
    args = [ "${rootDir}/dist/vtag.map", "com.yahoo.vespa.config.server.version", "${buildDir}/generated-sources/vtag" ]
}

compileJava.dependsOn generateVtag

sourceSets {
    main{
        java {
            srcDir "${buildDir}/generated-sources/vtag/"
        }
    }
}
