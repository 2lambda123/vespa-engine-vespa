/*
 * This file was generated by the Gradle 'init' task.
 */

dependencies {
    testCompile junit_4
    providedCompile project(':config-bundle')
    providedCompile project(':vespajlib')
    providedCompile project(':config-lib')
    providedCompile project(':config')
    compileOnly guava
}

task generateVtag(type: JavaExec) {
	dependsOn ":vespajlib:compileJava"
	workingDir = file(buildDir)
	outputs.dir "${buildDir}"

	classpath = files([
		"${rootDir}/vespajlib/build/classes/java/main"
	])
	main = "com.yahoo.vespa.VersionTagger"
	args = [ "${rootDir}/dist/vtag.map", 
		"com.yahoo.component", 
		"${buildDir}/generated-sources/vtag", "vtag"  ]
}

compileJava.dependsOn generateVtag

sourceSets {
	main{
		java {
			srcDir "${buildDir}/generated-sources/vtag/"
		}
	}
}
